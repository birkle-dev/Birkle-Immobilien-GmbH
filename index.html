<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <title>Birkle Immobilien GmbH – Garagen & Stellplätze</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Leaflet Map CSS & JS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background: #f5f7fa;
        }

        header {
            background: #1e4a7b;
            padding: 15px;
            color: white;
            font-size: 20px;
            text-align: center;
        }

        h2 {
            color: #1e4a7b;
        }

        section {
            max-width: 900px;
            margin: 30px auto;
            padding: 0 15px;
        }

        .object-card {
            background: white;
            border: 1px solid #ddd;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .object-card img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .popup-img {
            width: 100%;
            height: 220px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 12px;
        }

        .btn-primary {
            background: #1e4a7b;
            color: white;
            padding: 10px 16px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
        }

        .btn-secondary {
            background: white;
            color: #1e4a7b;
            padding: 8px 14px;
            border-radius: 6px;
            border: 1px solid #1e4a7b;
            cursor: pointer;
        }

        #objectOverlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.55);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 999;
        }

        #objectPopup {
            background: #fff;
            padding: 20px;
            width: 95%;
            max-width: 480px;
            border-radius: 10px;
        }

        .field {
            margin-bottom: 12px;
        }

        input, textarea, select {
            width: 100%;
            padding: 8px;
            border-radius: 6px;
            border: 1px solid #ccc;
        }

        #map {
            width: 100%;
            height: 400px;
            border-radius: 10px;
        }
    </style>
</head>
<body>

<header>
    Birkle Immobilien GmbH – Garagen & Stellplätze
</header>

<section>
    <h2>Verfügbare Objekte</h2>

    <!-- Objekt Minoritenstraße -->
    <div class="object-card">
        <img src="https://raw.githubusercontent.com/birkle-dev/Birkle-Immobilien-GmbH/main/IMG_3478.jpeg"
             alt="Einzelgarage Minoritenstraße 9">
        <h3>Einzelgarage – Minoritenstraße 9, 88048 Friedrichshafen</h3>
        <p>15 m² • Trockene Bauweise • Abschließbar • Zentrale Lage</p>
        <button class="btn-secondary" onclick="openObject('obj1')">Details & Anfrage →</button>
    </div>

    <!-- Objekt Eugenstraße -->
    <div class="object-card">
        <img src="https://raw.githubusercontent.com/birkle-dev/Birkle-Immobilien-GmbH/main/IMG_2152.jpeg"
             alt="Tiefgarage Eugenstraße 41">
        <h3>Tiefgaragenplatz – Eugenstraße 41, 88045 Friedrichshafen</h3>
        <p>Tiefgarage • Sichere Stellfläche • Gute Erreichbarkeit</p>
        <button class="btn-secondary" onclick="openObject('obj2')">Details & Anfrage →</button>
    </div>
</section>

<section>
    <h2>Objekte auf der Karte</h2>
    <p>Klicken Sie auf die Markierungen, um Details zu sehen oder eine Anfrage zu stellen.</p>
    <div id="map"></div>
</section>

<!-- Popup -->
<div id="objectOverlay">
    <div id="objectPopup">
        <img id="popupImg" class="popup-img" src="" style="display:none;">
        <h3 id="objectTitle"></h3>
        <p id="objectDesc" style="color:#666;"></p>

        <form>
            <div class="field">
                <label>Name *</label>
                <input type="text" required>
            </div>

            <div class="field">
                <label>E-Mail *</label>
                <input type="email" required>
            </div>

            <div class="field">
                <label>Telefon (optional)</label>
                <input type="tel">
            </div>

            <div class="field">
                <label>Besichtigungstermin?</label>
                <select required>
                    <option value="">Bitte auswählen</option>
                    <option>Ja, bitte Termin vorschlagen</option>
                    <option>Nein, nur Informationen senden</option>
                </select>
            </div>

            <div class="field">
                <label>Nachricht</label>
                <textarea></textarea>
            </div>

            <button class="btn-primary" type="submit">Anfrage senden</button>
        </form>

        <button onclick="closeObject()" class="btn-secondary" style="margin-top: 10px;">Schließen</button>
    </div>
</div>

<script>
const objekte = [
    {
        id: "obj1",
        name: "Einzelgarage – Minoritenstraße 9, 88048 Friedrichshafen",
        beschreibung: "15 m² • Abschließbar • Trockene Bauweise • Zentrale Lage",
        lat: 47.667476,
        lng: 9.471954,
        img: "https://raw.githubusercontent.com/birkle-dev/Birkle-Immobilien-GmbH/main/IMG_3478.jpeg"
    },
    {
        id: "obj2",
        name: "Tiefgaragenplatz – Eugenstraße 41, 88045 Friedrichshafen",
        beschreibung: "Tiefgaragenstellplatz • Einfacher Zugang • Gute Anbindung • Sofort verfügbar",
        lat: 47.652709,
        lng: 9.479505,
        img: "https://raw.githubusercontent.com/birkle-dev/Birkle-Immobilien-GmbH/main/IMG_2152.jpeg"
    }
];

// Karte initialisieren mit Bounds für alle Marker
const map = L.map('map');
const bounds = L.latLngBounds(objekte.map(o => [o.lat, o.lng]));
map.fitBounds(bounds);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap-Mitwirkende'
}).addTo(map);

// Marker setzen
objekte.forEach(o => {
    const m = L.marker([o.lat, o.lng]).addTo(map);
    m.bindPopup(`
        <strong>${o.name}</strong><br>
        ${o.beschreibung}<br><br>
        <button onclick="openObject('${o.id}')" 
        style="padding:6px 10px; border:none; background:#1e4a7b; color:#fff; border-radius:6px; cursor:pointer;">
            Details & Anfrage →
        </button>
    `);
});

// Popup öffnen
function openObject(id) {
    const o = objekte.find(x => x.id === id);

    if (o.img) {
        document.getElementById("popupImg").src = o.img;
        document.getElementById("popupImg").style.display = "block";
    } else {
        document.getElementById("popupImg").style.display = "none";
    }

    document.getElementById("objectTitle").textContent = o.name;
    document.getElementById("objectDesc").textContent = o.beschreibung;
    document.getElementById("objectOverlay").style.display = "flex";
}

// Popup schließen
function closeObject() {
    document.getElementById("objectOverlay").style.display = "none";
}
</script>

</body>
</html>
